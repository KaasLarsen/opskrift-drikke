<!doctype html>
<html lang="da">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Opskrift – opskrift-drikke.dk</title>

    <!-- Tailwind -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net"/>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Eget theme (valgfri, hvis du bruger site.css på resten) -->
    <link rel="stylesheet" href="/assets/site.css">

    <!-- Meta -->
    <meta name="description" content="drikkeopskrifter med søgning, favoritter og kommentarer."/>
    <meta property="og:title" content="opskrift-drikke.dk"/>
    <meta property="og:description" content="5.000 drikkeopskrifter – søg, gem og bedøm."/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.opskrift-drikke.dk/"/>

    <!-- Icons / PWA -->
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
    <link rel="manifest" href="/assets/manifest.json">

    <!-- Sitemap hint -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"/>

    <!-- Global app (indsætter header/footer og loader nav/auth) -->
    <script type="module" src="/js/app.js"></script>

    <!-- Analytics (valgfri) -->
    <script defer src="/js/analytics.js"></script>

    <style>
      .card { border-radius: 1rem; box-shadow: 0 4px 18px rgba(0,0,0,.06); }
      .btn  { border-radius: 1rem; }
      @media print {
        #header, #footer, #favBtn, #printBtn, #shareBtn { display:none !important; }
        .card { box-shadow:none !important; border:0 !important; }
        body { background:#fff; color:#000; }
      }
    </style>
  </head>
  <body class="bg-stone-50 text-stone-900">
    <!-- Header partial mount -->
    <div id="header"></div>

    <main class="max-w-6xl mx-auto px-4">
      <section class="pt-8" id="recipePage">
        <nav class="text-sm">
          <a href="/index.html" class="hover:underline">Forside</a> / <span id="breadcrumbTitle">Opskrift</span>
        </nav>

        <h1 id="recipeTitle" class="text-3xl font-semibold mt-2">Indlæser...</h1>

        <div class="mt-3 flex items-center flex-wrap gap-3 text-sm">
          <div id="ratingStars" class="flex items-center gap-1"></div>

          <div class="inline-flex items-center gap-2">
            <span>Din bedømmelse:</span>
            <div id="userRating" class="flex items-center gap-1 cursor-pointer"></div>
          </div>

          <button id="favBtn" class="btn border px-3 py-1.5 inline-flex items-center gap-2">
            <svg class="w-4 h-4"><use href="/assets/icons.svg#heart"/></svg><span>Gem</span>
          </button>

          <!-- Ekstra handlinger -->
          <button id="printBtn" class="btn border px-3 py-1.5 inline-flex items-center gap-2">
            <svg class="w-4 h-4"><use href="/assets/icons.svg#print"/></svg><span>Print</span>
          </button>
          <button id="shareBtn" class="btn border px-3 py-1.5 inline-flex items-center gap-2">
            <svg class="w-4 h-4"><use href="/assets/icons.svg#share-2"/></svg><span>Kopiér link</span>
          </button>

          <span id="metaInfo" class="opacity-80"></span>
        </div>

        <div class="mt-6 grid md:grid-cols-3 gap-8">
          <!-- venstre kolonne -->
          <div class="md:col-span-2">
            <div class="card bg-white p-6">
              <h2 class="text-xl font-medium">Ingredienser</h2>
              <ul id="ingredients" class="list-disc ml-6 mt-2"></ul>
            </div>

            <div class="card bg-white p-6 mt-6">
              <h2 class="text-xl font-medium">Sådan gør du</h2>
              <ol id="steps" class="list-decimal ml-6 mt-2 space-y-2"></ol>
            </div>

            <div class="card bg-white p-6 mt-6">
              <h2 class="text-xl font-medium">Kommentarer</h2>
              <div id="commentList" class="mt-3 space-y-4"></div>
              <div id="commentFormWrap" class="mt-4">
                <textarea id="commentText" class="w-full border rounded-2xl p-3" placeholder="Skriv en kommentar..."></textarea>
                <button id="commentSubmit" class="btn border px-3 py-1.5 mt-2">Send</button>
                <p id="commentHint" class="text-sm opacity-70 mt-1">Du skal være logget ind.</p>
              </div>
            </div>
          </div>

          <!-- højre kolonne -->
          <aside class="md:col-span-1">
            <div class="card bg-white p-6">
              <h3 class="text-lg font-medium">Relaterede</h3>
              <ul id="relatedList" class="mt-2 space-y-2"></ul>
            </div>

            <!-- PriceRunner-slot til kategori-specifik widget -->
            <div class="card bg-white p-6 mt-6">
              <h3 class="text-lg font-medium">Anbefalet udstyr</h3>
              <div id="pr-recipe-slot" class="mt-2"></div>
            </div>

            <div class="card bg-white p-6 mt-6">
              <h3 class="text-lg font-medium">Del</h3>
              <p>Kopiér linket og del med en ven.</p>
            </div>
          </aside>
        </div>
      </section>

      <!-- print + kopiér -->
      <script type="module">
        const printBtn = document.getElementById('printBtn');
        const shareBtn = document.getElementById('shareBtn');

        printBtn?.addEventListener('click', () => window.print());

        shareBtn?.addEventListener('click', async () => {
          try {
            await navigator.clipboard.writeText(location.href);
            const toast = document.createElement('div');
            toast.textContent = 'Link kopieret';
            toast.className = 'fixed bottom-4 left-1/2 -translate-x-1/2 bg-black text-white text-sm px-3 py-1.5 rounded-2xl';
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 1500);
          } catch {
            alert('Kunne ikke kopiere link');
          }
        });
      </script>

      <!-- opskrift-logik (importerer selv pr-mapping og rotator) -->
      <script type="module" src="/js/recipe-page.js"></script>
    </main>

    <!-- Footer partial mount -->
    <div id="footer"></div>
  </body>
</html>
